{"variables":[],"info":{"name":"","_postman_id":"11a869cc-7fe0-458f-bcd4-e8613f501d2f","description":"","schema":"https:\/\/schema.getpostman.com\/json\/collection\/v2.0.0\/collection.json"},"item":[{"name":"Authentication\n\nThe process flow is as such:\n\n1. Mobile App login with Facebook or Google**\n2. Mobile App get the token (from Fb\/G)\n3. Send token to server via `\/api\/v1\/auth` endpoint\n4. Then server checks if we already have the user in local db:\n\n a. If already in, return an auth token\n\n b. Else, create user, then return an auth token\n\nThe auth token is actually JWT token. Basically, to call an authorised endpoint, include the JWT token in the request header: `Authorization: Bearer [JWTTokenHere]`. The request will pass through if the token is valid. The user can also be identified with the token.\n\nThe token does expire. If server returns `token_expired`, call `\/api\/v1\/auth\/refresh` to get a new token. The token is returned in `Authorization` header.\n\nTo get the current logged in user based on the token, call `\/api\/v1\/me`.\n\n** Fb uses same client_id\/secret, Google might be different. For example, for Android: https:\/\/developers.google.com\/identity\/sign-in\/android\/start-integrating","description":"","item":[{"name":"Get Authenticated User","request":{"url":"http:\/\/localhost\/api\/v1\/me","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nRetrieves the user associated with the JWT token.","response":[]}},{"name":"Authenticate User","request":{"url":"http:\/\/localhost\/api\/v1\/auth","method":"POST","body":{"mode":"formdata","formdata":[{"key":"service","value":"facebook","type":"text","enabled":true},{"key":"token","value":"in","type":"text","enabled":true}]},"description":"Exchanges social network token to JWT bearer token.","response":[]}},{"name":"Refresh Token","request":{"url":"http:\/\/localhost\/api\/v1\/auth\/refresh","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"* **Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\nCheck Authorization header for new token.\nCall this API to exchange expired (not invalid!) JWT token with a fresh one.","response":[]}}]},{"name":"Booking\n\nAll bookings by passengers are handled here.","description":"","item":[{"name":"Get bookings belonging to a user","request":{"url":"http:\/\/localhost\/api\/v1\/bookings-for-user","method":"GET","body":{"mode":"formdata","formdata":[{"key":"user_id","value":"incidunt","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns all offers belonging to user($id)","response":[]}},{"name":"Get all bookings belonging to an offer","request":{"url":"http:\/\/localhost\/api\/v1\/bookings-for-offer","method":"GET","body":{"mode":"formdata","formdata":[{"key":"offer_id","value":"fugiat","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns all bookings made to an offer or 404","response":[]}},{"name":"Get all bookings","request":{"url":"http:\/\/localhost\/api\/v1\/bookings","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns all bookings in database","response":[]}},{"name":"Create a booking","request":{"url":"http:\/\/localhost\/api\/v1\/bookings","method":"POST","body":{"mode":"formdata","formdata":[{"key":"offer_id","value":3331,"type":"text","enabled":true},{"key":"pax","value":3331,"type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nDo not use pax, pax defaults to 1. For future use ONLY.\n\nReturns Success or error message.","response":[]}},{"name":"Show a particular booking","request":{"url":"http:\/\/localhost\/api\/v1\/bookings\/{booking}","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns a single booking","response":[]}},{"name":"Cancel a booking","request":{"url":"http:\/\/localhost\/api\/v1\/bookings\/{booking}","method":"DELETE","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns success message or 404.","response":[]}}]},{"name":"Offer\n\nAll offers by drivers are handled here.","description":"","item":[{"name":"Get offers belonging to a user","request":{"url":"http:\/\/localhost\/api\/v1\/offers-for-user","method":"GET","body":{"mode":"formdata","formdata":[{"key":"user_id","value":"velit","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nSend a simple = true, to get a summarised version of offer.\n\nReturns all offers belonging to user($id)","response":[]}},{"name":"Get offers from Date","request":{"url":"http:\/\/localhost\/api\/v1\/offers-for-date","method":"GET","body":{"mode":"formdata","formdata":[{"key":"date","value":"2017-05-11","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nSend a simple = true, to get a summarised version of offer.\n\nIf no date given, today's date is used.\n\nReturns all offers on a requested date","response":[]}},{"name":"Get nearby offers","request":{"url":"http:\/\/localhost\/api\/v1\/nearby-offers","method":"POST","body":{"mode":"formdata","formdata":[{"key":"lat","value":15,"type":"text","enabled":true},{"key":"lng","value":31,"type":"text","enabled":true},{"key":"range","value":398446,"type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nSend a simple = true, to get a summarised version of offer.\n\nReturns all nearby offers (To be optimised)","response":[]}},{"name":"Get all offers","request":{"url":"http:\/\/localhost\/api\/v1\/offers","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nNot recommended for use\n\nReturns ALL offers in database","response":[]}},{"name":"Store an offer","request":{"url":"http:\/\/localhost\/api\/v1\/offers","method":"POST","body":{"mode":"formdata","formdata":[{"key":"meetup_time","value":"2017-05-11 14:17","type":"text","enabled":true},{"key":"start_name","value":"est","type":"text","enabled":true},{"key":"start_addr","value":"est","type":"text","enabled":true},{"key":"start_lat","value":40,"type":"text","enabled":true},{"key":"start_lng","value":81,"type":"text","enabled":true},{"key":"end_name","value":"est","type":"text","enabled":true},{"key":"end_addr","value":"est","type":"text","enabled":true},{"key":"end_lat","value":40,"type":"text","enabled":true},{"key":"end_lng","value":81,"type":"text","enabled":true},{"key":"vacancy","value":8099169,"type":"text","enabled":true},{"key":"remarks","value":"est","type":"text","enabled":true},{"key":"pref_gender","value":"female","type":"text","enabled":true},{"key":"vehicle_number","value":"est","type":"text","enabled":true},{"key":"vehicle_desc","value":"est","type":"text","enabled":true},{"key":"vehicle_model","value":"est","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns Validation errors OR success message w\/ data posted","response":[]}},{"name":"Show a single offer","request":{"url":"http:\/\/localhost\/api\/v1\/offers\/{offer}","method":"GET","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns a single offer from offer_id","response":[]}},{"name":"Update an offer","request":{"url":"http:\/\/localhost\/api\/v1\/offers\/{offer}","method":"PUT","body":{"mode":"formdata","formdata":[{"key":"meetup_time","value":"2017-05-11 14:17","type":"text","enabled":true},{"key":"start_name","value":"ratione","type":"text","enabled":true},{"key":"start_addr","value":"ratione","type":"text","enabled":true},{"key":"start_lat","value":-64,"type":"text","enabled":true},{"key":"start_lng","value":-127,"type":"text","enabled":true},{"key":"end_name","value":"ratione","type":"text","enabled":true},{"key":"end_addr","value":"ratione","type":"text","enabled":true},{"key":"end_lat","value":-64,"type":"text","enabled":true},{"key":"end_lng","value":-127,"type":"text","enabled":true},{"key":"vacancy","value":97,"type":"text","enabled":true},{"key":"remarks","value":"ratione","type":"text","enabled":true},{"key":"pref_gender","value":"male","type":"text","enabled":true},{"key":"vehicle_number","value":"ratione","type":"text","enabled":true},{"key":"vehicle_desc","value":"ratione","type":"text","enabled":true},{"key":"vehicle_model","value":"ratione","type":"text","enabled":true}]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nReturns success message or 404.","response":[]}},{"name":"Cancel an offer","request":{"url":"http:\/\/localhost\/api\/v1\/offers\/{offer}","method":"DELETE","body":{"mode":"formdata","formdata":[]},"description":"**Requires Authentication Header - ** *Authorization: Bearer [JWTTokenHere]*\n\nStatus: Cancelled = 0, Pending = 1, Ongoing = 2, Completed = 3\n\nReturns Success or 404.","response":[]}}]}]}